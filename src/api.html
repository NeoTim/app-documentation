<template>
  <require from="resources/details"></require>
  <section class="au-animate body">
    <ul class="au-menu">
      <li class="${$parent.selectedModule === repository ? 'au-active': ''}" repeat.for="repository of localCache.repositories">
        <a href="#/api/${repository.name}">${repository.prettyName}</a>
      </li>
    </ul>
    <div class="content" if.bind="!selectedModule">
      <h1>Please select a repository to view the API</h1>
    </div>
    <div class="content" if.bind="selectedModule">
      <div class="au-section">

        <h1 class="au-section-heading">
          <span>${selectedModule.prettyName}</span>
          <div class="pull-right">
            <select class="au-select">
              <option repeat.for="version of selectedModule.majorVersions">${version}</option>
            </select>
            <select class="au-select">
              <option repeat.for="version of selectedModule.minorVersions">${version}</option>
            </select>
          </div>
          <div class="pull-right">
            <span class="au-tag" if.bind="selectedModule.version">Version: ${selectedModule.version}</span>
          </div>
        </h1>

        <div class="au-section-body">
          <h3 if.bind="selectedModule.description">${selectedModule.description}</h3>

          <div class="text-sm" if.bind="selectedModule.keywords">
            <span class="strong">Keywords:</span>
            <span>${selectedModule.keywords.join(',')}</span>
          </div>

          <div class="spaced">
            <a class="au-button" href="https://github.com/${selectedModule.location}/blob/master/doc/CHANGELOG.md" target="_blank">Changes</a>
            <a class="au-button" href.bind="bugsUrl" target="_blank">Issues</a>
            <a class="au-button" href="https://github.com/${selectedModule.location}/blob/master/LICENSE" target="_blank">License</a>
            <a class="au-button" href.bind="repositoryUrl" target="_blank">Repository</a>
          </div>
        </div>
      </div>

      <div class="au-section">
        <div class="au-section-body">

          <template if.bind="selectedModule.dependencies">
            <h1>Dependencies</h1>
            <ul>
              <a href="#"><li repeat.for="dependency of selectedModule.dependencies">${dependency}</li></a>
            </ul>
          </template>

          <template if.bind="selectedModule.usedby">
            <h1>Used By</h1>
            <ul>
              <a href="#"><li repeat.for="use of selectedModule.usedby">${use}</li></a>
            </ul>
          </template>

          <template if.bind="selectedModule.classes">
            <h1>Exports</h1>
            <h2>Classes - <small>(${selectedModule.classes.length} ${selectedModule.classes.length === 1 ? 'class' : 'classes'})</small></h2>
            <ul>
              <li repeat.for="child of selectedModule.classes">
                <au-class value.bind="child"></au-class>
              </li>
            </ul>
            <template if.bind="selectedModule.methods.length > 0">
              <h1>Methods - <small>(${selectedModule.methods.length} ${selectedModule.methods.length === 1 ? 'method' : 'methods'})</small></h1>
              <ul class="no-bullet">
                <li repeat.for="method of selectedModule.methods">
                  <au-method value.bind="method"></au-method>
                </li>
              </ul>
            </template>

            <template if.bind="selectedModule.functions.length > 0">
              <h1>Functions - <small>(${selectedModule.functions.length} ${selectedModule.functions.length === 1 ? 'function' : 'functions'})</small></h1>
              <ul class="no-bullet">
                <li repeat.for="function of selectedModule.functions">
                  <au-function value.bind="function"></au-function>
                </li>
              </ul>
            </template>

            <template if.bind="selectedModule.properties.length > 0">
              <h1>Properties - <small>(${selectedModule.properties.length} ${selectedModule.properties.length === 1 ? 'property' : 'properties'})</small></h1>
              <ul>
                <au-property repeat.for="prop of selectedModule.properties" value.bind="prop"></au-property>
              </ul>
            </template>

            <template if.bind="selectedModule.events.length > 0">
              <h1>Events - <small>(${selectedModule.events.length} ${selectedModule.events.length === 1 ? 'event' : 'events'})</small></h1>
              <ul>
                <au-event repeat.for="event of selectedModule.events" value.bind="event"></au-event>
              </ul>
            </template>

            <template if.bind="selectedModule.variables.length > 0">
              <h1>Variables - <small>(${selectedModule.variables.length} ${selectedModule.variables.length === 1 ? 'variable' : 'variables'})</small></h1>
              <ul class="no-bullet">
                <li repeat.for="variable of selectedModule.variables" >
                  <au-variable value.bind="variable"></au-variable>
                </li>
              </ul>
            </template>
          </template>

          <template if.bind="selectedModule.articles">
            <h1>Related Articles</h1>
            <ul>
              <a href="#"><li repeat.for="article of selectedModule.articles">${article}</li></a>
            </ul>
          </template>

        </div>
    </div>
  </section>
</template>
