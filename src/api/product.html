<template>
  <require from="./product.css"></require>

  <au-view class="content product">

    <section class="au-card title-card">
      <header>
        <h1>${product.productName}</h1>
        <span class="card-control">
          <!-- <au-tag class="card-control">${selectedProductVersion.version}</au-tag> -->
          <select class="au-tag" value.bind="selectedVersion">
            <option repeat.for="version of product.availableVersions" model.bind="version.version">${version.display}</option>
          </select>
        </span>
      </header>

      <article>
        <h3 description if.bind="selectedProductVersion.description">${selectedProductVersion.description}</h3>

        <ul class="inline-list" if.bind="selectedProductVersion.keywords">
          <li list-heading>Keywords</li>
          <template repeat.for="keyword of selectedProductVersion.keywords">
            <li list-item>${keyword}</li>
          </template>
        </ul>

        <div class="spaced">
          <a class="au-button" href.bind="selectedProductVersion.changeLogUrl" target="_blank">Changes</a>
          <a class="au-button" href.bind="selectedProductVersion.bugsUrl" target="_blank">Issues</a>
          <a class="au-button" href.bind="selectedProductVersion.licenseUrl" target="_blank">License</a>
          <a class="au-button" href.bind="selectedProductVersion.repositoryUrl" target="_blank">Repository</a>
        </div>
      </article>
    </section>

    <section class="au-card">

      <template if.bind="isDeps">
        <blockquote>
          <h1>Dependencies</h1>
        </blockquote>
        <article>
          <ul class="stack-list" no-bullet gutter underline source-code>
            <li repeat.for="dependency of selectedProductVersion.dependencies">
              <a color="accent" href="#/${dependency.userName}/${dependency.productName}/${dependency.preferredVersion}/doc/api/overview">aurelia-${dependency.productName}</a>
            </li>
          </ul>
        </article>
      </template>

      <blockquote>
        <h1>Exports</h1>
      </blockquote>

      <article>

        <template if.bind="selectedProductVersion.classes.length">
          <h3 half-gutter=left color="primary-dark">Classes</h3>
          <ul class="stack-list" gutter="2x">
            <li repeat.for="child of selectedProductVersion.classes">
              <a trans="6" color="primary-dark" href="#/${$parent.product.userName}/${$parent.product.productName}/${$parent.product.preferredVersion}/doc/api/class/${child.name}">
                ${child.name}
              </a>
            </li>
          </ul>
        </template>

        <template if.bind="selectedProductVersion.interfaces.length">
          <h3 half-gutter=left color="primary-dark">Interfaces</h3>
          <ul class="stack-list" gutter="2x">
            <li repeat.for="child of selectedProductVersion.interfaces">
              <a trans="6" color="primary-dark" href="#/${$parent.product.userName}/${$parent.product.productName}/${$parent.product.preferredVersion}/doc/api/interface/${child.name}">
                ${child.name}
              </a>
            </li>
          </ul>
        </template>

        <template if.bind="selectedProductVersion.variables.length">
          <h3 half-gutter=left color="primary-dark">Variables</h3>
          <ul class="stack-list" gutter="2x">
            <li repeat.for="child of selectedProductVersion.variables">
              <a trans="6" color="primary-dark" href="#variable-${child.name}">
                ${child.name}
              </a>
            </li>
          </ul>
        </template>

        <template if.bind="selectedProductVersion.functions.length">
          <h3 half-gutter=left color="primary-dark">Functions</h3>
          <ul class="stack-list" gutter="2x">
            <li repeat.for="child of selectedProductVersion.functions">
              <a trans="6" color="primary-dark" href="#function-${child.name}">
                ${child.name}
              </a>
            </li>
          </ul>
        </template>
      </article>
    </section>

    <template if.bind="selectedProductVersion.variables.length">
      <h1 gutter>Variables</h1>
      <section class="au-card">
        <template repeat.for="variable of selectedProductVersions.variables">
          <article>
            <blockquote>
              <h1>${variable.name}: ${variable.type.name}</h1>
              <div description>${variable.comment.shortText || 'no description available'}</div>
            </blockquote>
          </article>
        </template>
      </section>
    </template>

    <template if.bind="selectedProductVersion.functions.length">
      <h1 gutter>Functions</h1>
      <section class="au-card">
        <template repeat.for="function of selectedProductVersion.functions">

          <blockquote id="function-${function.signature.name}">
            <h1 color="accent">${function.signature.name}(<span repeat.for="param of function.signature.parameters">${param.name}: ${param.type.name || 'any'}<span if.bind="!$last">, </span></span>): ${function.signature.type.name || 'any'}</h1>
            <div description>${function.signature.comment.shortText || 'no description available'}</div>
          </blockquote>

          <article gutter="2x" if.bind="function.signature.parameters.length > 0">
            <h3 comment>@Parameters: </h3>
            <ul class="stack-list" gutter>
              <li repeat.for="param of function.signature.parameters">
                <strong>${param.name}: ${param.type.name || 'any'}</strong>
                <p>${param.comment.text || 'no description available'}</p>
              </li>
            </ul>
          </article>

        </template>
      </section>
    </template>

  </au-view>
</template>
